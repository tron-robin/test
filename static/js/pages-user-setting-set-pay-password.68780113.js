(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-setting-set-pay-password"],{"165d":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"vk-data-verification-code"},[n("v-uni-view",{style:e.customStyle,on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendSmsCode.apply(void 0,arguments)}}},[e._t("default",[e._v(e._s(e.tips))],{tips:e.tips,secNum:e.secNum})],2)],1)},r=[]},1750:function(e,t,n){"use strict";n.r(t);var o=n("7112"),r=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},"3a3b":function(e,t,n){var o=n("970f");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=n("4f06").default;r("52b1f576",o,!0,{sourceMap:!1,shadowMode:!1})},"51b8":function(e,t,n){"use strict";n.r(t);var o=n("8a48"),r=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},7112:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("a9e3"),n("ac1f"),n("5319"),n("99af"),n("00b4"),n("c975");var o={"zh-Hans":{startText:"获取验证码",changeText:"X秒重新获取",endText:"重新获取",tryAgainInSeconds:"秒后再重试",pleaseEnterTheCorrectMobileNumber:"请输入正确的手机号码",sending:"发送中...",verificationCodeSent:"验证码已发送",triggerDayLevelFlowControl:"触发天级流控",pleaseTryAgainTomorrow:"短信发送频繁，请明日再试！",pleaseTryAgainIn1Hour:"短信发送频繁，请过1小时后再试！",triggerMinuteLevelFlowControl:"触发分钟级流控",pleaseTryAgainLater:"短信发送频繁，请稍后再试！"},"zh-Hant":{startText:"獲取驗證碼",changeText:"X秒重新獲取",endText:"重新獲取",tryAgainInSeconds:"秒後再重試",pleaseEnterTheCorrectMobileNumber:"請輸入正確的手機號碼",sending:"發送中...",verificationCodeSent:"驗證碼已發送",triggerDayLevelFlowControl:"觸發天級流控",pleaseTryAgainTomorrow:"短信發送頻繁，請明日再試！",pleaseTryAgainIn1Hour:"短信發送頻繁，請過1小時後再試！",triggerMinuteLevelFlowControl:"觸發分鐘級流控",pleaseTryAgainLater:"短信發送頻繁，請稍後再試！"},en:{startText:"Get code",changeText:"X second reacquire",endText:"Reacquire",tryAgainInSeconds:"Try again in seconds",pleaseEnterTheCorrectMobileNumber:"Please enter the correct mobile number",sending:"Sending...",verificationCodeSent:"Verification code sent",triggerDayLevelFlowControl:"Trigger day level flow control",pleaseTryAgainTomorrow:"SMS sent frequently, please try again tomorrow!",pleaseTryAgainIn1Hour:"SMS sent frequently, please try again in 1 hour",triggerMinuteLevelFlowControl:"Trigger minute level flow control",pleaseTryAgainLater:"SMS sent frequently, please try again later"}},r={name:"vk-data-verification-code",emits:["start","end","change","send","codeChange","error","success"],props:{mode:{type:String,default:"mobile"},mobile:{type:String},type:{type:String,default:"login"},customStyle:{type:[String,Object]},seconds:{type:[String,Number],default:60},startText:{type:String,default:""},changeText:{type:String,default:""},endText:{type:String,default:""},keepRunning:{type:Boolean,default:!1},uniqueKey:{type:String,default:""},checkUserExist:{type:Boolean,default:!1}},data:function(){return{secNum:this.seconds,timer:null,canGetCode:!0,tips:"",locale:{}}},created:function(){if("undefined"!==typeof vk){var e=vk.pubfn.getLocale();this.locale=o[e]}else this.locale=o["zh-Hans"]},mounted:function(){this.checkKeepRunning()},watch:{seconds:{immediate:!0,handler:function(e){this.secNum=e}}},computed:{startTextCom:function(){return this.startText||this.locale.startText||"获取验证码"},changeTextCom:function(){return this.changeText||this.locale.changeText||"X秒重新获取"},endTextCom:function(){return this.endText||this.locale.endText||"重新获取"}},methods:{checkKeepRunning:function(){var e=Number(uni.getStorageSync(this.uniqueKey+"_$uCountDownTimestamp"));if(!e)return this.changeEvent(this.startTextCom);var t=Math.floor(+new Date/1e3);this.keepRunning&&e&&e>t?(this.secNum=e-t,uni.removeStorageSync(this.uniqueKey+"_$uCountDownTimestamp"),this.start()):this.changeEvent(this.startTextCom)},start:function(){var e=this;this.timer&&(clearInterval(this.timer),this.timer=null),this.$emit("start"),this.canGetCode=!1,this.changeEvent(this.changeTextCom.replace(/x|X/,this.secNum)),this.setTimeToStorage(),this.timer=setInterval((function(){--e.secNum?e.changeEvent(e.changeTextCom.replace(/x|X/,e.secNum)):(clearInterval(e.timer),e.timer=null,e.changeEvent(e.endTextCom),e.secNum=e.seconds,e.$emit("end"),e.canGetCode=!0)}),1e3)},reset:function(e){this.canGetCode=!0,clearInterval(this.timer),this.secNum=this.seconds,this.changeEvent(e||this.endTextCom)},changeEvent:function(e){this.codeChange(e),this.$emit("change",e)},setTimeToStorage:function(){if(this.keepRunning&&this.timer&&this.secNum>0&&this.secNum<=this.seconds){var e=Math.floor(+new Date/1e3);uni.setStorage({key:this.uniqueKey+"_$uCountDownTimestamp",data:e+Number(this.secNum)})}},codeChange:function(e){this.tips=e,this.$emit("codeChange",e)},sendSmsCode:function(){var e=this,t=uni.vk,n=e.mobile,o=e.type,r=e.canGetCode,a=e.checkUserExist,i=e.secNum,s=e.mode;r?"custom"!==s?t.pubfn.test(n,"mobile")?(e.tips=e.locale.sending,t.userCenter.sendSmsCode({needAlert:!1,data:{mobile:n,type:o,checkUserExist:a},success:function(n){t.toast(e.locale.verificationCodeSent),e.start(),e.$emit("success",n)},fail:function(n){e.tips=e.startTextCom,n.errMsg&&n.errMsg.indexOf("触发天级流控")>-1?t.alert(e.locale.pleaseTryAgainTomorrow,(function(){e.$emit("error",n)})):n.errMsg&&n.errMsg.indexOf("触发小时级流控")>-1?t.alert(e.locale.pleaseTryAgainIn1Hour,(function(){e.$emit("error",n)})):n.errMsg&&n.errMsg.indexOf("触发分钟级流控")>-1?t.alert(e.locale.pleaseTryAgainLater,(function(){e.$emit("error",n)})):n.msg?t.alert(n.msg,(function(){e.$emit("error",n)})):t.alert(e.locale.pleaseTryAgainLater,(function(){e.$emit("error",n)}))}})):t.toast(e.locale.pleaseEnterTheCorrectMobileNumber,"none"):e.$emit("send",{type:o}):t.toast("".concat(i).concat(e.locale.tryAgainInSeconds),"none")}},beforeDestroy:function(){this.setTimeToStorage(),clearTimeout(this.timer),this.timer=null}};t.default=r},"8a48":function(e,t,n){"use strict";n("7a82");var o=n("ee27").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("f07e")),a=o(n("c964"));n("fb6a"),n("ac1f"),n("00b4");var i={data:function(){return{pageIndex:0,currentIndex:0,show:!1,data:{},form1:{mobile:vk.getVuex("$user.userInfo.mobile"),code:"",pay_password:"",confirm_pay_password:""},scrollTop:0}},onPageScroll:function(e){this.scrollTop=e.scrollTop},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{changeInput:function(e){console.log(e),0===this.currentIndex?(this.form1.code+=e,6===this.form1.code.length&&(this.show=!1)):1===this.currentIndex?(this.form1.pay_password+=e,6===this.form1.pay_password.length&&(this.show=!1)):2===this.currentIndex&&(this.form1.confirm_pay_password+=e,6===this.form1.confirm_pay_password.length&&(this.show=!1))},backspace:function(e){0===this.currentIndex?this.form1.code=this.form1.code.slice(this.form1.code.length-1,1):1===this.currentIndex?this.form1.pay_password=this.form1.pay_password.slice(this.form1.pay_password.length-1,1):2===this.currentIndex&&(this.form1.confirm_pay_password=this.form1.confirm_pay_password.slice(this.form1.confirm_pay_password.length-1,1))},closeKeyboard:function(e){!1===e&&(this.show=!1)},init:function(){this.form1.mobile=vk.getVuex("$user.userInfo.mobile")},pageTo:function(e){vk.navigateTo(e)},confirmSubmitPayPassword:function(){var e=this;return(0,a.default)((0,r.default)().mark((function t(){var n,o,a,i,s;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e,o=n.form1,a=o.code,i=o.pay_password,s=o.confirm_pay_password,!vk.pubfn.isNull(i)&&6==i.length){t.next=5;break}return vk.toast("支付密码不能为空，且长度为6"),t.abrupt("return");case 5:if(!vk.pubfn.isNull(s)&&6==s.length){t.next=8;break}return vk.toast("确认密码不能为空，且长度为6"),t.abrupt("return");case 8:if(i==s){t.next=11;break}return vk.toast("两次密码必须相同!"),t.abrupt("return");case 11:if(vk.pubfn.checkStr(a,"mobileCode")){t.next=14;break}return vk.toast("验证码格式为6位数字"),t.abrupt("return");case 14:vk.callFunction({url:"client/user.set_pay_password",title:"请求中...",data:n.form1,success:function(e){vk.toast("设置成功");var t=n.getOpenerEventChannel();t.emit&&t.emit("update_pay_password",!0),setTimeout((function(){vk.navigateBack()}),800)}});case 15:case"end":return t.stop()}}),t)})))()},next:function(e){var t=this;if(!t.form1.oldMobileCode)return vk.toast("请输入短信验证码"),t.focus.oldMobileCode=!0,!1;setTimeout((function(){t.pageIndex=e,setTimeout((function(){t.$refs.mobileCode.reset("获取验证码")}),100)}),300)},bindMobile:function(){return vk.pubfn.test(this.form1.mobile,"mobile")?this.form1.code?void("1"===this.options.pageIndex?vk.userCenter.bindMobile({data:this.form1,success:function(e){vk.alert("绑定成功",(function(){vk.navigateBack()}))}}):vk.userCenter.bindNewMobile({data:this.form1,success:function(e){vk.alert("换绑成功",(function(){vk.navigateBack()}))}})):(vk.toast("请输入短信验证码"),this.focus.mobileCode=!0,!1):(vk.toast("请输入正确的手机号"),this.focus.mobile=!0,!1)}},watch:{},computed:{}};t.default=i},"8d02":function(e,t,n){"use strict";n.r(t);var o=n("ed45"),r=n("51b8");for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("9d36");var i=n("f0c5"),s=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,"4af09b8f",null,!1,o["a"],void 0);t["default"]=s.exports},"970f":function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,".card[data-v-4af09b8f]{padding:0 %?30?%;background-color:#fff}.btn[data-v-4af09b8f]{color:#fff;display:flex;align-items:center;justify-content:center;width:90%;height:%?70?%;margin:%?40?% auto;background-color:var(--main);border-radius:%?70?%;box-shadow:0 %?10?% %?10?% var(--main)}.btn[data-v-4af09b8f]:active{-webkit-filter:grayscale(50%);filter:grayscale(50%)}.center[data-v-4af09b8f]{display:flex;justify-content:center;align-items:center}",""]),e.exports=t},"9d36":function(e,t,n){"use strict";var o=n("3a3b"),r=n.n(o);r.a},ed45:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={uInput:n("64c8").default,vkDataVerificationCode:n("f1f6").default,uFormItem:n("aaa7").default,uKeyboard:n("fc7a").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"app app-bg"},[n("v-uni-view",{staticStyle:{height:"20rpx"}}),n("v-uni-view",{staticClass:"card"},[n("v-uni-view",{staticClass:"flex justify-between align-center border-bottom py-2"},[n("u-input",{attrs:{placeholder:"请输入手机号",disabled:!0},model:{value:e.form1.mobile,callback:function(t){e.$set(e.form1,"mobile",t)},expression:"form1.mobile"}}),n("v-uni-view",{staticClass:"bg-main text-white px-2 py-1 rounded"},[n("vk-data-verification-code",{attrs:{seconds:"60",mobile:e.form1.mobile,type:"validate_pay_password","custom-style":"font-size: 28rpx; "}})],1)],1),n("u-form-item",{attrs:{prop:"code"}},[n("u-input",{attrs:{disabled:!0,maxlength:"6",type:"number",placeholder:"请输入短信验证码"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.currentIndex=0,e.form1.code="",e.show=!0}},model:{value:e.form1.code,callback:function(t){e.$set(e.form1,"code",t)},expression:"form1.code"}})],1),n("u-form-item",{attrs:{prop:"pay_password"}},[n("u-input",{attrs:{disabled:!0,type:"password",maxlength:"6",placeholder:"请输入支付密码"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.currentIndex=1,e.form1.pay_password="",e.show=!0}},model:{value:e.form1.pay_password,callback:function(t){e.$set(e.form1,"pay_password",t)},expression:"form1.pay_password"}})],1),n("u-form-item",{attrs:{prop:"confirm_pay_password"}},[n("u-input",{attrs:{disabled:!0,type:"password",maxlength:"6",placeholder:"请再次输入新密码"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.currentIndex=2,e.form1.confirm_pay_password="",e.show=!0}},model:{value:e.form1.confirm_pay_password,callback:function(t){e.$set(e.form1,"confirm_pay_password",t)},expression:"form1.confirm_pay_password"}})],1)],1),n("v-uni-view",{staticClass:"mx-3 mt-5 flex align-center justify-center"},[n("v-uni-view",{staticClass:"save-btn-main w-100",staticStyle:{margin:"200rpx auto"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.confirmSubmitPayPassword()}}},[e._v("确认")])],1),n("u-keyboard",{attrs:{mode:"number",value:e.show,dotEnabled:!1},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeInput.apply(void 0,arguments)},backspace:function(t){arguments[0]=t=e.$handleEvent(t),e.backspace.apply(void 0,arguments)},input:function(t){arguments[0]=t=e.$handleEvent(t),e.closeKeyboard.apply(void 0,arguments)}}})],1)},a=[]},f1f6:function(e,t,n){"use strict";n.r(t);var o=n("165d"),r=n("1750");for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);var i=n("f0c5"),s=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,"e05f3886",null,!1,o["a"],void 0);t["default"]=s.exports}}]);