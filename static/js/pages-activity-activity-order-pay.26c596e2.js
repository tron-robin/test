(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-activity-activity-order-pay"],{"171b":function(t,e,n){var a=n("478f");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("4279ba44",a,!0,{sourceMap:!1,shadowMode:!1})},"1f48":function(t,e,n){"use strict";n("7a82");var a=n("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("0122")),i={name:"pay-order",props:{},data:function(){return{vkPay:{queryPaymentAction:{name:"vk-pay",action:"pay/queryPayment",actionKey:"action",dataKey:"data"},codeUrl:"",status:0,pageShow:!0,polling:!0,returnUrl:"",confirmShow:!1},form1:{provider:"wxpay",out_trade_no:"",openid:"",total_fee:"",type:"goods"}}},created:function(){var t=uni.vk,e=t.h5.getEnv();"h5-weixin"===e&&(this.form1.openid||(this.form1.openid=t.getStorageSync("vkmall.h5-weixin-openid")||t.getVuex("$user.userInfo.wx_openid.h5-weixin")),this.form1.openid||t.myfn.user.getH5WeixinCode({scope:"snsapi_base",state:"openid"}))},methods:{createPayment:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=e.form1,a=e.vk,i=t.orderInfo,r=t.provider;n.out_trade_no=i.order_no,n.provider=r,n.total_fee=a.pubfn.getData(i,"amount_info.need_payment_amount");var s=a.h5.getEnv();"h5-weixin"===s&&"wxpay"===r&&(n.openid||(n.openid=a.getVuex("$user.userInfo.wx_openid.h5-weixin"))),e.$refs.vkPay.createPayment({action:{name:"router",action:"client/order.createPaymentForGoods",actionKey:"$url",dataKey:"data"},data:n,success:function(e){a.toast("支付成功","success"),console.log("paySuccess",e),a.callFunction({url:"client/order.queryPayment",title:"请求中...",data:{out_trade_no:n.out_trade_no},success:function(e){(0,o.default)(t.success)&&t.success(e)}})},fail:function(t){"create"===t.failType?a.alert(t.msg):"request"===t.failType?a.toast("请求支付失败"):"result"===t.failType&&a.toast("支付失败")},cancel:function(t){a.toast("用户取消支付")}})},queryPayment:function(){var t=uni.vk,e=this;e.$refs.vkPay.queryPayment({title:"查询中...",data:{out_trade_no:e.form1.out_trade_no},needAlert:!0,success:function(n){e.vkPay.status=2,e.vkPay.confirmShow=!1,t.toast(n.msg)},fail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"订单已退款"===t.msg&&(e.vkPay.confirmShow=!1)}})},cancelPay:function(){this.vkPay.status=0,this.vkPay.codeUrl=""}}};e.default=i},2038:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a9e3");var a={name:"vk-data-loading",emits:["update:modelValue","input"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},title:{type:String,default:""},mask:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0,0,0,0)"},timeout:{type:Number,default:30},image:{type:String,default:"/static/loading.gif"},top:{type:String,default:"40vh"},zIndex:{type:[String,Number],default:99999999},delayTime:{type:[String,Number],default:500},showImage:{type:Boolean,default:!0},imageStyle:{type:[String,Object]},titleStyle:{type:[String,Object]}},data:function(){return{loadingImage:!1}},created:function(){var t=this;t.timeout>0&&(t._timer=setTimeout((function(){t.valueCom&&(t.$emit("input",!1),t.$emit("update:modelValue",!1),uni.showToast({title:"加载超时，请重试",icon:"none"}))}),1e3*t.timeout))},destroyed:function(){this._timer&&clearTimeout(this._timer),this._loadingImageTimer&&clearTimeout(this._loadingImageTimer)},methods:{stopPrevent:function(){},showLoading:function(){var t=this;Number(t.delayTime)>0&&(t.loadingImage=!1),t._loadingImageTimer=setTimeout((function(){t.loadingImage=!0}),Number(t.delayTime))}},watch:{valueCom:{handler:function(t){t?this.showLoading():(this._timer&&clearTimeout(this._timer),this._loadingImageTimer&&clearTimeout(this._loadingImageTimer))},immediate:!0}},computed:{valueCom:function(){return this.value},styleCom:function(){var t={},e=this.zIndex;return e&&(t.zIndex=e),t},maskBackgroundColorCom:function(){var t=this.delayTime,e=this.maskBackgroundColor,n=this.loadingImage;return Number(t)?n?e:"rgba(0,0,0,0)":e}}};e.default=a},2332:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 外部浏览器H5支付弹窗确认开始 */.pay-confirm-popup[data-v-50b65d9e]{position:fixed;width:100vw;top:0;bottom:0;background-color:rgba(0,0,0,.6)}.pay-confirm-popup .pay-confirm-popup-content[data-v-50b65d9e]{width:%?550?%;margin:50% auto 0 auto;background-color:#fff;border-radius:%?10?%;padding:%?40?%}.pay-confirm-popup .pay-confirm-popup-content .pay-confirm-popup-title[data-v-50b65d9e]{text-align:center;padding:%?20?% 0;margin-bottom:%?30?%}.pay-confirm-popup .pay-confirm-popup-content .pay-confirm-popup-refresh[data-v-50b65d9e]{margin-top:%?20?%}.pay-confirm-popup .pay-confirm-popup-content .pay-confirm-popup-cancel[data-v-50b65d9e]{margin-top:%?20?%;text-align:center}\n/* 外部浏览器H5支付弹窗确认结束 */\n/* 二维码支付弹窗开始 */.pay-qrcode-popup[data-v-50b65d9e]{position:fixed;width:100vw;top:0;bottom:0}.pay-qrcode-popup .pay-qrcode-popup-mask[data-v-50b65d9e]{position:absolute;top:0;left:0;width:100vw;height:100vh;background-color:rgba(0,0,0,.6)}.pay-qrcode-popup .pay-qrcode-popup-content[data-v-50b65d9e]{position:relative;width:%?500?%;margin:40% auto 0 auto;background-color:#fff;border-radius:%?10?%;padding:%?40?%;box-sizing:initial;text-align:center}.pay-qrcode-popup .pay-qrcode-popup-content .pay-qrcode-popup-info[data-v-50b65d9e]{text-align:center;padding:%?20?%}.pay-qrcode-popup .pay-qrcode-popup-content .pay-qrcode-popup-info .pay-qrcode-popup-info-fee[data-v-50b65d9e]{color:red;font-size:%?60?%;font-weight:700}\n/* 二维码支付弹窗结束 */',""]),t.exports=e},3485:function(t,e,n){"use strict";n("7a82");var a=n("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;a(n("0122"));n("14d9"),n("d9e2"),n("d401"),n("a9e3"),n("cb29"),n("e9c4");var o={};(function(){function t(t){var e,n,a;return t<128?[t]:t<2048?(e=192+(t>>6),n=128+(63&t),[e,n]):(e=224+(t>>12),n=128+(t>>6&63),a=128+(63&t),[e,n,a])}function e(e,n){this.typeNumber=-1,this.errorCorrectLevel=n,this.modules=null,this.moduleCount=0,this.dataCache=null,this.rsBlocks=null,this.totalDataCount=-1,this.data=e,this.utf8bytes=function(e){for(var n=[],a=0;a<e.length;a++)for(var o=e.charCodeAt(a),i=t(o),r=0;r<i.length;r++)n.push(i[r]);return n}(e),this.make()}e.prototype={constructor:e,getModuleCount:function(){return this.moduleCount},make:function(){this.getRightType(),this.dataCache=this.createData(),this.createQrcode()},makeImpl:function(t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[e]=new Array(this.moduleCount);this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(!0,t),this.typeNumber>=7&&this.setupTypeNumber(!0),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var a=-1;a<=7;a++)e+a<=-1||this.moduleCount<=e+a||(this.modules[t+n][e+a]=0<=n&&n<=6&&(0==a||6==a)||0<=a&&a<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=a&&a<=4)},createQrcode:function(){for(var t=0,e=0,n=null,a=0;a<8;a++){this.makeImpl(a);var o=i.getLostPoint(this);(0==a||t>o)&&(t=o,e=a,n=this.modules)}this.modules=n,this.setupTypeInfo(!1,e),this.typeNumber>=7&&this.setupTypeNumber(!1)},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0,null==this.modules[6][t]&&(this.modules[6][t]=t%2==0))},setupPositionAdjustPattern:function(){for(var t=i.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var a=t[e],o=t[n];if(null==this.modules[a][o])for(var r=-2;r<=2;r++)for(var s=-2;s<=2;s++)this.modules[a+r][o+s]=-2==r||2==r||-2==s||2==s||0==r&&0==s}},setupTypeNumber:function(t){for(var e=i.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var a=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=a,this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=a}},setupTypeInfo:function(t,e){for(var a=n[this.errorCorrectLevel]<<3|e,o=i.getBCHTypeInfo(a),r=0;r<15;r++){var s=!t&&1==(o>>r&1);r<6?this.modules[r][8]=s:r<8?this.modules[r+1][8]=s:this.modules[this.moduleCount-15+r][8]=s;s=!t&&1==(o>>r&1);r<8?this.modules[8][this.moduleCount-r-1]=s:r<9?this.modules[8][15-r-1+1]=s:this.modules[8][15-r-1]=s}this.modules[this.moduleCount-8][8]=!t},createData:function(){var t=new d,n=this.typeNumber>9?16:8;t.put(4,4),t.put(this.utf8bytes.length,n);for(var a=0,o=this.utf8bytes.length;a<o;a++)t.put(this.utf8bytes[a],8);t.length+4<=8*this.totalDataCount&&t.put(0,4);while(t.length%8!=0)t.putBit(!1);while(1){if(t.length>=8*this.totalDataCount)break;if(t.put(e.PAD0,8),t.length>=8*this.totalDataCount)break;t.put(e.PAD1,8)}return this.createBytes(t)},createBytes:function(t){for(var e=0,n=0,a=0,o=this.rsBlock.length/3,r=new Array,s=0;s<o;s++)for(var c=this.rsBlock[3*s+0],d=this.rsBlock[3*s+1],l=this.rsBlock[3*s+2],f=0;f<c;f++)r.push([l,d]);for(var p=new Array(r.length),m=new Array(r.length),v=0;v<r.length;v++){var h=r[v][0],g=r[v][1]-h;n=Math.max(n,h),a=Math.max(a,g),p[v]=new Array(h);for(s=0;s<p[v].length;s++)p[v][s]=255&t.buffer[s+e];e+=h;var y=i.getErrorCorrectPolynomial(g),_=new u(p[v],y.getLength()-1),b=_.mod(y);m[v]=new Array(y.getLength()-1);for(s=0;s<m[v].length;s++){var w=s+b.getLength()-m[v].length;m[v][s]=w>=0?b.get(w):0}}var x=new Array(this.totalDataCount),k=0;for(s=0;s<n;s++)for(v=0;v<r.length;v++)s<p[v].length&&(x[k++]=p[v][s]);for(s=0;s<a;s++)for(v=0;v<r.length;v++)s<m[v].length&&(x[k++]=m[v][s]);return x},mapData:function(t,e){for(var n=-1,a=this.moduleCount-1,o=7,r=0,s=this.moduleCount-1;s>0;s-=2){6==s&&s--;while(1){for(var u=0;u<2;u++)if(null==this.modules[a][s-u]){var c=!1;r<t.length&&(c=1==(t[r]>>>o&1));var d=i.getMask(e,a,s-u);d&&(c=!c),this.modules[a][s-u]=c,o--,-1==o&&(r++,o=7)}if(a+=n,a<0||this.moduleCount<=a){a-=n,n=-n;break}}}}},e.PAD0=236,e.PAD1=17;for(var n=[1,0,3,2],a={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},i={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){var e=t<<10;while(i.getBCHDigit(e)-i.getBCHDigit(i.G15)>=0)e^=i.G15<<i.getBCHDigit(e)-i.getBCHDigit(i.G15);return(t<<10|e)^i.G15_MASK},getBCHTypeNumber:function(t){var e=t<<12;while(i.getBCHDigit(e)-i.getBCHDigit(i.G18)>=0)e^=i.G18<<i.getBCHDigit(e)-i.getBCHDigit(i.G18);return t<<12|e},getBCHDigit:function(t){var e=0;while(0!=t)e++,t>>>=1;return e},getPatternPosition:function(t){return i.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case a.PATTERN000:return(e+n)%2==0;case a.PATTERN001:return e%2==0;case a.PATTERN010:return n%3==0;case a.PATTERN011:return(e+n)%3==0;case a.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case a.PATTERN101:return e*n%2+e*n%3==0;case a.PATTERN110:return(e*n%2+e*n%3)%2==0;case a.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new u([1],0),n=0;n<t;n++)e=e.multiply(new u([1,r.gexp(n)],0));return e},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,a=0,o=0;o<e;o++)for(var i=0,r=t.modules[o][0],s=0;s<e;s++){var u=t.modules[o][s];if(s<e-6&&u&&!t.modules[o][s+1]&&t.modules[o][s+2]&&t.modules[o][s+3]&&t.modules[o][s+4]&&!t.modules[o][s+5]&&t.modules[o][s+6]&&(s<e-10?t.modules[o][s+7]&&t.modules[o][s+8]&&t.modules[o][s+9]&&t.modules[o][s+10]&&(n+=40):s>3&&t.modules[o][s-1]&&t.modules[o][s-2]&&t.modules[o][s-3]&&t.modules[o][s-4]&&(n+=40)),o<e-1&&s<e-1){var c=0;u&&c++,t.modules[o+1][s]&&c++,t.modules[o][s+1]&&c++,t.modules[o+1][s+1]&&c++,0!=c&&4!=c||(n+=3)}r^u?i++:(r=u,i>=5&&(n+=3+i-5),i=1),u&&a++}for(s=0;s<e;s++)for(i=0,r=t.modules[0][s],o=0;o<e;o++){u=t.modules[o][s];o<e-6&&u&&!t.modules[o+1][s]&&t.modules[o+2][s]&&t.modules[o+3][s]&&t.modules[o+4][s]&&!t.modules[o+5][s]&&t.modules[o+6][s]&&(o<e-10?t.modules[o+7][s]&&t.modules[o+8][s]&&t.modules[o+9][s]&&t.modules[o+10][s]&&(n+=40):o>3&&t.modules[o-1][s]&&t.modules[o-2][s]&&t.modules[o-3][s]&&t.modules[o-4][s]&&(n+=40)),r^u?i++:(r=u,i>=5&&(n+=3+i-5),i=1)}var d=Math.abs(100*a/e/e-50)/5;return n+=10*d,n}},r={glog:function(t){if(t<1)throw new Error("glog("+t+")");return r.LOG_TABLE[t]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return r.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},s=0;s<8;s++)r.EXP_TABLE[s]=1<<s;for(s=8;s<256;s++)r.EXP_TABLE[s]=r.EXP_TABLE[s-4]^r.EXP_TABLE[s-5]^r.EXP_TABLE[s-6]^r.EXP_TABLE[s-8];for(s=0;s<255;s++)r.LOG_TABLE[r.EXP_TABLE[s]]=s;function u(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var n=0;while(n<t.length&&0==t[n])n++;this.num=new Array(t.length-n+e);for(var a=0;a<t.length-n;a++)this.num[a]=t[a+n]}u.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var a=0;a<t.getLength();a++)e[n+a]^=r.gexp(r.glog(this.get(n))+r.glog(t.get(a)));return new u(e,0)},mod:function(t){var e=this.getLength(),n=t.getLength();if(e-n<0)return this;for(var a=new Array(e),o=0;o<e;o++)a[o]=this.get(o);while(a.length>=n){var i=r.glog(a[0])-r.glog(t.get(0));for(o=0;o<t.getLength();o++)a[o]^=r.gexp(r.glog(t.get(o))+i);while(0==a[0])a.shift()}return new u(a,0)}};var c=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];function d(){this.buffer=new Array,this.length=0}e.prototype.getRightType=function(){for(var t=1;t<41;t++){var e=c[4*(t-1)+this.errorCorrectLevel];if(void 0==e)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+this.errorCorrectLevel);for(var n=e.length/3,a=0,o=0;o<n;o++){var i=e[3*o+0],r=e[3*o+2];a+=r*i}var s=t>9?2:1;if(this.utf8bytes.length+s<a||40==t){this.typeNumber=t,this.rsBlock=e,this.totalDataCount=a;break}}},d.prototype={get:function(t){var e=Math.floor(t/8);return this.buffer[e]>>>7-t%8&1},put:function(t,e){for(var n=0;n<e;n++)this.putBit(t>>>e-n-1&1)},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var l=[];o=function(t){if(this.options={text:"",size:256,correctLevel:3,background:"#ffffff",foreground:"#000000",pdground:"#000000",image:"",imageSize:30,canvasId:t.canvasId,context:t.context,usingComponents:t.usingComponents,showLoading:t.showLoading,loadingText:t.loadingText},"string"===typeof t&&(t={text:t}),t)for(var n in t)this.options[n]=t[n];for(var a=null,o=(n=0,l.length);n<o;n++)if(l[n].text==this.options.text&&l[n].text.correctLevel==this.options.correctLevel){a=l[n].obj;break}n==o&&(a=new e(this.options.text,this.options.correctLevel),l.push({text:this.options.text,correctLevel:this.options.correctLevel,obj:a}));var i=function(t){var e=t.options;return e.pdground&&(t.row>1&&t.row<5&&t.col>1&&t.col<5||t.row>t.count-6&&t.row<t.count-2&&t.col>1&&t.col<5||t.row>1&&t.row<5&&t.col>t.count-6&&t.col<t.count-2)?e.pdground:e.foreground};(function(t){t.showLoading&&uni.showLoading({title:t.loadingText,mask:!0});for(var e=uni.createCanvasContext(t.canvasId,t.context),n=a.getModuleCount(),o=t.size,r=t.imageSize,s=(o/n).toPrecision(4),u=(o/n).toPrecision(4),c=0;c<n;c++)for(var d=0;d<n;d++){var l=Math.ceil((d+1)*s)-Math.floor(d*s),f=Math.ceil((c+1)*s)-Math.floor(c*s),p=i({row:c,col:d,count:n,options:t});e.setFillStyle(a.modules[c][d]?p:t.background),e.fillRect(Math.round(d*s),Math.round(c*u),l,f)}if(t.image){var m=Number(((o-r)/2).toFixed(2)),v=Number(((o-r)/2).toFixed(2));(function(e,n,a,o,i,r,s,u,c){e.setLineWidth(s),e.setFillStyle(t.background),e.setStrokeStyle(t.background),e.beginPath(),e.moveTo(n+r,a),e.arcTo(n+o,a,n+o,a+r,r),e.arcTo(n+o,a+i,n+o-r,a+i,r),e.arcTo(n,a+i,n,a+i-r,r),e.arcTo(n,a,n+r,a,r),e.closePath(),u&&e.fill(),c&&e.stroke()})(e,m,v,r,r,2,6,!0,!0),e.drawImage(t.image,m,v,r,r)}setTimeout((function(){e.draw(!0,(function(){setTimeout((function(){uni.canvasToTempFilePath({width:t.width,height:t.height,destWidth:t.width,destHeight:t.height,canvasId:t.canvasId,quality:Number(1),success:function(e){t.cbResult&&t.cbResult(e.tempFilePath)},fail:function(e){t.cbResult&&t.cbResult(e)},complete:function(){t.showLoading&&uni.hideLoading()}},t.context)}),t.text.length+100)}))}),t.usingComponents?0:150)})(this.options)},o.prototype.clear=function(t){var e=uni.createCanvasContext(this.options.canvasId,this.options.context);e.clearRect(0,0,this.options.size,this.options.size),e.draw(!1,(function(){t&&t()}))}})();var i=o;e.default=i},"478f":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".vk-qrcode[data-v-003abc61]{\r\ndisplay:flex;\r\nposition:relative;justify-content:center;align-items:center;flex-direction:column}.vk-qrcode-image[data-v-003abc61]{\r\ndisplay:block\n}.loading-text[data-v-003abc61]{\r\ndisplay:flex;\r\ncolor:#9a9a9a;justify-content:center;align-items:center;flex-direction:column}.vk-qrcode-canvas[data-v-003abc61]{position:fixed;top:%?-99999?%;left:%?-99999?%;z-index:-99999}",""]),t.exports=e},4885:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valueCom?n("v-uni-view",{staticClass:"vk-data-loading",style:t.styleCom},[t.mask?n("v-uni-view",{staticClass:"mask",style:{backgroundColor:t.maskBackgroundColorCom},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.stopPrevent.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.stopPrevent.apply(void 0,arguments)}}}):t._e(),t.loadingImage||0==Number(t.delayTime)?n("v-uni-view",{staticClass:"loading",style:{top:t.top}},[t.showImage?n("v-uni-image",{staticClass:"image",style:t.imageStyle,attrs:{src:t.image}}):t._e(),n("v-uni-view",{staticClass:"text",style:t.titleStyle},[t._v(t._s(t.title))])],1):t._e()],1):t._e()},o=[]},4991:function(t,e,n){var a=n("b851");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("694e6ad6",a,!0,{sourceMap:!1,shadowMode:!1})},"5fdb":function(t,e,n){"use strict";n.r(e);var a=n("6549"),o=n("e7d3");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("f7a5");var r=n("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"50b65d9e",null,!1,a["a"],void 0);e["default"]=s.exports},"617c":function(t,e,n){"use strict";n.r(e);var a=n("b4dc"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},6549:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={vkUniPay:n("ab7c").default,vkUniQrcode:n("d6ec").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("vk-uni-pay",{ref:"vkPay",attrs:{status:t.vkPay.status,"code-url":t.vkPay.codeUrl,"query-payment-action":t.vkPay.queryPaymentAction,"page-show":t.vkPay.pageShow,polling:t.vkPay.polling,"return-url":t.vkPay.returnUrl},on:{"update:status":function(e){arguments[0]=e=t.$handleEvent(e),t.$set(t.vkPay,"status",e)},"update:codeUrl":function(e){arguments[0]=e=t.$handleEvent(e),t.$set(t.vkPay,"codeUrl",e)},"update:code-url":function(e){arguments[0]=e=t.$handleEvent(e),t.$set(t.vkPay,"codeUrl",e)}}}),t.vkPay.status<2&&t.vkPay.codeUrl?n("v-uni-view",{staticClass:"pay-qrcode-popup"},[n("v-uni-view",{staticClass:"pay-qrcode-popup-mask",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelPay.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"pay-qrcode-popup-content"},[n("vk-uni-qrcode",{attrs:{text:t.vkPay.codeUrl,size:450}}),n("v-uni-view",{staticClass:"pay-qrcode-popup-info"},[n("v-uni-view",[n("v-uni-text",{staticClass:"pay-qrcode-popup-info-fee"},[t._v(t._s((t.form1.total_fee/100).toFixed(2)))]),n("v-uni-text",[t._v("元")])],1),"wxpay"==t.form1.provider?n("v-uni-view",[t._v("请用微信扫码支付")]):"alipay"==t.form1.provider?n("v-uni-view",[t._v("请用支付宝扫码支付")]):t._e()],1),1==t.vkPay.status?n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.queryPayment.apply(void 0,arguments)}}},[t._v("我已完成支付")]):t._e()],1)],1):t._e(),t.vkPay.confirmShow?n("v-uni-view",{staticClass:"pay-confirm-popup"},[n("v-uni-view",{staticClass:"pay-confirm-popup-content"},[n("v-uni-view",{staticClass:"pay-confirm-popup-title"},[t._v("请确认支付是否已完成")]),n("v-uni-view",[n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.queryPayment.apply(void 0,arguments)}}},[t._v("已完成支付")])],1),n("v-uni-view",{staticClass:"pay-confirm-popup-refresh"},[n("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.afreshPayment.apply(void 0,arguments)}}},[t._v("支付遇到问题，重新支付")])],1),n("v-uni-view",{staticClass:"pay-confirm-popup-cancel",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.vkPay.confirmShow=!1}}},[t._v("暂不支付")])],1)],1):t._e()],1)},i=[]},"689f":function(t,e,n){var a=n("93cd");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("697770f2",a,!0,{sourceMap:!1,shadowMode:!1})},"7b31":function(t,e,n){"use strict";var a=n("bb36"),o=n.n(a);o.a},"7dfd":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={uKeyboard:n("fc7a").default,vkDataFloatBall:n("80c3").default,vkDataLoading:n("be34").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"app app-bg"},[n("v-uni-view",{staticStyle:{height:"20rpx"}}),n("v-uni-view",{staticStyle:{height:"20rpx"}}),t.data.orderInfo&&t.data.orderInfo.amount_info.need_payment_amount>0?n("v-uni-view",{staticClass:"bg-white m-2 flex",staticStyle:{"border-radius":"12rpx",padding:"34rpx 20rpx","line-height":"45rpx","font-size":"32rpx","font-weight":"500"}},[n("v-uni-view",[t._v("需付金额：")]),n("v-uni-view",{staticClass:"payment-amount-box"},[t._v("￥"),n("v-uni-text",{staticClass:"payment-amount"},[t._v(t._s(t.vk.pubfn.priceFilter(t.data.orderInfo.amount_info.need_payment_amount)))])],1)],1):t._e(),n("v-uni-view",{staticClass:"mx-2 bg-white",staticStyle:{"border-radius":"12rpx",padding:"26rpx 20rpx 0 20rpx"}},[n("v-uni-view",{staticStyle:{"line-height":"45rpx","font-size":"32rpx","font-weight":"500","margin-bottom":"56rpx"}},[t._v("选择支付方式")]),n("v-uni-view",{staticClass:"flex justify-between align-center",staticStyle:{padding:"0 18rpx 60rpx 22rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payType="wxpay"}}},[n("v-uni-view",{staticClass:"flex"},[n("v-uni-image",{staticStyle:{width:"50rpx",height:"50rpx"},attrs:{src:t.wx_icon}}),n("v-uni-view",{staticStyle:{"line-height":"45rpx","margin-left":"18rpx"}},[t._v("微信支付")])],1),n("v-uni-image",{staticStyle:{width:"40rpx",height:"40rpx"},attrs:{src:"wxpay"===t.payType?t.select_icon:t.default_icon}})],1),n("v-uni-view",{staticClass:"flex justify-between align-center",staticStyle:{padding:"0 18rpx 60rpx 22rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payType="alipay"}}},[n("v-uni-view",{staticClass:"flex"},[n("v-uni-image",{staticStyle:{width:"50rpx",height:"50rpx"},attrs:{src:t.alipay_icon}}),n("v-uni-view",{staticStyle:{"line-height":"45rpx","margin-left":"18rpx"}},[t._v("支付宝支付")])],1),n("v-uni-image",{staticStyle:{width:"40rpx",height:"40rpx"},attrs:{src:"alipay"===t.payType?t.select_icon:t.default_icon}})],1),n("v-uni-view",{staticClass:"flex justify-between align-center",staticStyle:{padding:"0 18rpx 60rpx 22rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payType="balance"}}},[n("v-uni-view",{staticClass:"flex"},[n("v-uni-image",{staticStyle:{width:"50rpx",height:"50rpx"},attrs:{src:t.balance_icon}}),n("v-uni-view",{staticStyle:{"line-height":"45rpx","margin-left":"18rpx"}},[t._v("余额支付"),n("v-uni-text",{staticStyle:{"font-size":"32rpx",color:"#333","margin-left":"12rpx"}},[t._v("（"+t._s(t.$fn.priceFilter(t.vk.getVuex("$user.userInfo.account_balance.balance")))+")")])],1)],1),n("v-uni-image",{staticStyle:{width:"40rpx",height:"40rpx"},attrs:{src:"balance"===t.payType?t.select_icon:t.default_icon}})],1)],1),n("v-uni-view",{staticClass:"mx-3"},[n("v-uni-view",{staticClass:"save-btn-main bg-main",staticStyle:{height:"78rpx","border-radius":"39rpx",margin:"150rpx auto"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPay.apply(void 0,arguments)}}},[t._v("立即支付")])],1),n("pay-order",{ref:"vkPay"}),n("u-keyboard",{attrs:{mode:"number",value:t.show_input_password,dotEnabled:!1,tips:"支付密码",confirmBtn:!1,cancelBtn:!1,showInput:!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeInput.apply(void 0,arguments)},backspace:function(e){arguments[0]=e=t.$handleEvent(e),t.backspace.apply(void 0,arguments)},input:function(e){arguments[0]=e=t.$handleEvent(e),t.closeKeyboard.apply(void 0,arguments)}}}),n("vk-data-float-ball",{attrs:{"scroll-top":t.scrollTop}}),n("vk-data-loading",{attrs:{delayTime:"0"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}})],1)},i=[]},"80c3":function(t,e,n){"use strict";n.r(e);var a=n("d31e"),o=n("f574");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("9dc9");var r=n("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"ebe37cf2",null,!1,a["a"],void 0);e["default"]=s.exports},"84cb":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.canvasId&&""!==t.text?n("v-uni-view",{staticClass:"vk-qrcode"},[n("v-uni-canvas",{staticClass:"vk-qrcode-canvas",style:{width:t.cpSize+"px",height:t.cpSize+"px"},attrs:{"canvas-id":t.canvasId}}),!1===t.show?n("v-uni-view"):!t.loading&&t.result?n("v-uni-image",{staticClass:"vk-qrcode-image",style:{width:t.cpSize+"px",height:t.cpSize+"px"},attrs:{src:t.result}}):n("v-uni-view",{staticClass:"loading-text",style:"width: "+t.size+t.unit+";height: "+t.size+t.unit+";"},[t._v(t._s(t.loadingText))])],1):t._e()},o=[]},"883d":function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a9e3"),n("c975"),n("d81d"),n("14d9");var a={name:"vk-data-float-ball",props:{scrollTop:{type:Number,default:function(){return 0}},leftBtns:{type:Array,default:function(){return[]}},rightBtns:{type:Array,default:function(){return[]}},showBack:{type:Boolean},custom:{type:Array,default:function(){return[]}},zIndex:{type:[Number],default:900}},data:function(){return{data:{showBack:!1},complete:!1}},created:function(){var t=getCurrentPages();t&&t.length>1?this.data.showBack=!0:this.data.showBack=!1},mounted:function(){var t=this;setTimeout((function(){t.complete=!0}),100)},methods:{pageBack:function(){var t=getCurrentPages();t&&t.length>1&&uni.navigateBack({delta:1})},customEvent:function(t){var e=this.custom,n=void 0===e?[]:e,a=this.vk;if("login"===t&&-1===n.indexOf(t)){var o=a.callFunctionUtil.getConfig();a.reLaunch(o.login.url)}this.$emit(t)}},computed:{rightBtnsCom:function(){var t=[],e=this.rightBtns,n=void 0===e?[]:e;return n.map((function(e,n){"contact"===e||t.push(e)})),t}}};e.default=a},"8b3f":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".u-back-top[data-v-63149417]{width:%?80?%;height:%?80?%;position:fixed;z-index:9;display:flex;flex-direction:row;flex-direction:column;justify-content:center;background-color:#e1e1e1;color:#606266;align-items:center;transition:opacity .4s}.u-back-top__content[data-v-63149417]{display:flex;flex-direction:row;flex-direction:column;align-items:center}.u-back-top__content__tips[data-v-63149417]{font-size:%?24?%;-webkit-transform:scale(.8);transform:scale(.8);line-height:1}",""]),t.exports=e},"8c57":function(t,e,n){"use strict";var a=n("171b"),o=n.n(a);o.a},"92bd":function(t,e,n){"use strict";var a=n("4991"),o=n.n(a);o.a},"93cd":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".vk-data-loading[data-v-3e593c34]{position:fixed;left:0;top:0;width:0;height:0;z-index:99999999;display:flex;width:100vw;height:100vh;justify-content:center}.mask[data-v-3e593c34]{position:fixed;left:0;top:0;right:0;bottom:0}.loading[data-v-3e593c34]{position:relative}.loading .image[data-v-3e593c34]{padding:%?20?%;width:%?140?%;height:%?140?%;display:block;margin-left:auto;margin-right:auto}.loading .text[data-v-3e593c34]{color:#7e7e7e;text-align:center;margin-top:%?10?%;font-size:%?28?%}",""]),t.exports=e},"940c2":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={uIcon:n("d1bb").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"u-back-top",class:["u-back-top--mode--"+t.mode],style:[{bottom:t.bottom+"rpx",right:t.right+"rpx",borderRadius:"circle"==t.mode?"10000rpx":"8rpx",zIndex:t.uZIndex,opacity:t.opacity},t.customStyle],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backToTop.apply(void 0,arguments)}}},[t.$slots.default||t.$slots.$default?t._t("default"):n("v-uni-view",{staticClass:"u-back-top__content"},[n("u-icon",{attrs:{name:t.icon,"custom-style":t.iconStyle},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backToTop.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"u-back-top__content__tips"},[t._v(t._s(t.tips))])],1)],2)},i=[]},9608:function(t,e,n){"use strict";n("7a82");var a=n("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("0122"));n("a9e3"),n("e9c4");var i,r=a(n("3485")),s={name:"vk-uni-qrcode",props:{value:{type:String},text:{type:String,default:""},size:{type:Number,default:200},unit:{type:String,default:"rpx"},show:{type:Boolean,default:!0},background:{type:String,default:"#ffffff"},foreground:{type:String,default:"#000000"},pdground:{type:String,default:"#000000"},image:{type:String,default:""},imageSize:{type:Number,default:40},lv:{type:Number,default:3},onval:{type:Boolean,default:!0},loadMake:{type:Boolean,default:!0},usingComponents:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!1},loadingText:{type:String,default:"二维码生成中"},loading:{type:Boolean,default:!1}},data:function(){return{result:"",canvasId:""}},methods:{_makeCode:function(){var t=this;this._empty(this.text)?uni.showToast({title:"二维码内容不能为空",icon:"none",duration:2e3}):i=new r.default({context:t,canvasId:t.canvasId,usingComponents:t.usingComponents,showLoading:t.showLoading,loadingText:t.loadingText,text:t.text,size:t.cpSize,background:t.background,foreground:t.foreground,pdground:t.pdground,correctLevel:t.lv,image:t.image,imageSize:t.imageSize,cbResult:function(e){t._result(e)}})},_clearCode:function(){this._result(""),i.clear()},_saveCode:function(){""!=this.result&&uni.saveImageToPhotosAlbum({filePath:this.result,success:function(){uni.showToast({title:"二维码保存成功",icon:"success",duration:2e3})}})},_result:function(t){this.result=t,this.$emit("result",t),this.$emit("input",t)},_empty:function(t){var e=(0,o.default)(t),n=!1;return"number"==e&&""==String(t)||"undefined"==e?n=!0:"object"==e?"{}"!=JSON.stringify(t)&&"[]"!=JSON.stringify(t)&&null!=t||(n=!0):"string"==e?""!=t&&"undefined"!=t&&"null"!=t&&"{}"!=t&&"[]"!=t||(n=!0):"function"==e&&(n=!1),n},getBase64:function(){return this.result}},watch:{size:function(t,e){var n=this;t==e||this._empty(t)||(this.cSize=t,this._empty(this.text)||setTimeout((function(){n._makeCode()}),100))},text:function(t,e){var n=this;n.onval&&(t==e||n._empty(t)||(n.textTimer&&clearTimeout(n.textTimer),n.textTimer=setTimeout((function(){n._makeCode()}),300)))}},computed:{cpSize:function(){return"rpx"==this.unit?uni.upx2px(this.size):this.size}},mounted:function(){var t=this;this.canvasId="vk-qrcode-canvas-"+Math.floor(1e6*Math.random()),this.loadMake&&(this._empty(this.text)||setTimeout((function(){t._makeCode()}),100))}};e.default=s},"9c96":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"vk-uni-pay"})},o=[]},"9dc9":function(t,e,n){"use strict";var a=n("a75b"),o=n.n(a);o.a},a75b:function(t,e,n){var a=n("e8a6");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("3aef1e0c",a,!0,{sourceMap:!1,shadowMode:!1})},ab7c:function(t,e,n){"use strict";n.r(e);var a=n("9c96"),o=n("afc0");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);var r=n("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"1f2f1c85",null,!1,a["a"],void 0);e["default"]=s.exports},afc0:function(t,e,n){"use strict";n.r(e);var a=n("c7e7"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},b38a:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a9e3");var a={name:"u-back-top",props:{mode:{type:String,default:"circle"},icon:{type:String,default:"arrow-upward"},tips:{type:String,default:""},duration:{type:[Number,String],default:100},scrollTop:{type:[Number,String],default:0},top:{type:[Number,String],default:400},bottom:{type:[Number,String],default:200},right:{type:[Number,String],default:40},zIndex:{type:[Number,String],default:"9"},iconStyle:{type:Object,default:function(){return{color:"#909399",fontSize:"38rpx"}}},customStyle:{type:Object,default:function(){return{}}}},watch:{showBackTop:function(t,e){t?(this.uZIndex=this.zIndex,this.opacity=1):(this.uZIndex=-1,this.opacity=0)}},computed:{showBackTop:function(){return this.scrollTop>uni.upx2px(this.top)}},data:function(){return{opacity:0,uZIndex:-1}},methods:{backToTop:function(){uni.pageScrollTo({scrollTop:0,duration:this.duration})}}};e.default=a},b4dc:function(t,e,n){"use strict";n("7a82");var a=n("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c975"),n("99af"),n("fb6a"),n("d81d"),n("d401"),n("d3b7"),n("25f0"),n("e25e");var o=a(n("fc11")),i=a(n("5fdb")),r={components:{payOrder:i.default},data:function(){var t;return t={payType:"wxpay",pay_type:"",pay_password:"",show_input_password:!1,balance_icon:"https://mp-1e0acd55-7819-4fee-982a-70fb396d7ffa.cdn.bspapp.com/images/icon_pay_zfb@3x.png",wx_icon:"https://mp-1e0acd55-7819-4fee-982a-70fb396d7ffa.cdn.bspapp.com/images/icon_pay_wx@3x.png",default_icon:"https://mp-1e0acd55-7819-4fee-982a-70fb396d7ffa.cdn.bspapp.com/images/icon-default.png",select_icon:"https://mp-1e0acd55-7819-4fee-982a-70fb396d7ffa.cdn.bspapp.com/images/icon-choosed.png",data:{orderInfo:{status:"",buyer_info:{nickname:"",avatar:""},order_no:"",transaction_id:"",amount_info:{total_amount:"",goods_amount:"",original_express_amount:"",express_amount:"",should_payment_amount:"",payment_amount:"",need_payment_amount:"",used_balance_amount:"",used_cash_amount:"",refund_amount:"",refund_balance_amount:"",refund_cash_amount:""},discount_info:{used_account_points:"",used_vip_id:"",used_coupon_id:"",total_discount_amount:"",integral_discount_express_amount:"",balance_discount_express_amount:"",vip_discount_amount:"",integral_discount_amount:"",balance_discount_amount:"",coupon_discount_amount:"",business_discount_amount:"",seckill_discount_amount:""},buyer_remark:"",seller_remark:"",goods_sku_list:[],express_info:{position:{},formatted_address:"",mode:"",receiver_name:"",receiver_mobile:"",send_name:"",send_mobile:"",express_name:"",express_no:""},auto_cancel_time:"",pay_time:"",cancel_time:"",send_time:"",apply_refund_time:"",refund_time:"",confirm_receive_time:"",comment_time:"",complete_time:"",close_time:""}},form1:{},scrollTop:0,loading:!1,steps1:{index:0,list:[{name:"等待付款"},{name:"商家发货"},{name:"确认收货"},{name:"等待评价"},{name:"交易完成"}],list2:[{name:"等待付款"},{name:"商家发货"},{name:"等待核销"},{name:"等待评价"},{name:"交易完成"}],list3:[{name:"等待付款"},{name:"到店自提"},{name:"确认收货"},{name:"等待评价"},{name:"交易完成"}]},steps2:{index:0,list:[{name:"发起退款"},{name:"等待审核"},{name:"退款中"},{name:"交易关闭"}]},countDownTime:0},(0,o.default)(t,"payType",{show:!1}),(0,o.default)(t,"user_pay_password",vk.getVuex("$user.userInfo.pay_password")),(0,o.default)(t,"awaitTime",""),(0,o.default)(t,"orderVerify",{show:!1,num:1}),t},onPageScroll:function(t){this.scrollTop=t.scrollTop},onLoad:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,this.init(t)},onReady:function(){},onShow:function(){this.runTimer1()},onHide:function(){this.clearTimer1()},onUnload:function(){this.clearTimer1()},methods:{init:function(t){var e=this;console.log("init: ",t),uni.setNavigationBarTitle({title:"订单付款"}),vk.callFunction({url:"client/order.getInfo",loading:!0,data:{_id:t._id,order_no:t.order_no,user:!0},success:function(t){e.initOrder(t.orderInfo)},fail:function(t){vk.alert(t.msg,(function(){-2===t.code&&vk.navigateToHome()}))}})},initOrder:function(t){this.data.orderInfo=t,this.steps1.index=this.steps1Fn(t.status),this.steps2.index=this.steps2Fn(t.status),-1===t.status&&(this.steps1={index:1,list:[{name:"等待付款"},{name:"订单取消"}]});var e=this.getOpenerEventChannel();e.emit&&e.emit("update",t),this.runTimer1()},runTimer1:function(){var t=this,e=t.data.orderInfo||{};if([-2,1,2].indexOf(e.status)>-1){var n="pay_time";-2===e.status&&(n="apply_refund_time"),e[n]&&(t.awaitTime=t.getCalcTime(e[n])),t.clearTimer1(),t.timer1=setInterval((function(){e[n]&&(t.awaitTime=t.getCalcTime(e[n]))}),1e3)}},clearTimer1:function(){this.timer1&&clearInterval(this.timer1)},copy:function(t){uni.setClipboardData({data:t,success:function(){vk.toast("复制成功")}})},cancel:function(){var t=this;vk.confirm("确定取消订单吗？取消后不可恢复！","提示","确定取消","再想想",(function(e){e.confirm&&t.cancelOrder()}))},cancelOrder:function(){var t=this;vk.callFunction({url:"client/order.cancel",loading:!0,data:{order_no:t.options.order_no},success:function(e){t.initOrder(e.orderInfo)}})},expressInfo:function(){var t=this.data.orderInfo;vk.navigateTo("/pages/user/order/express?name=".concat(t.express_info.express_name,"&no=").concat(t.express_info.express_no,"&phone=").concat(t.express_info.receiver_mobile))},changeInput:function(t){this.pay_password+=t,6===this.pay_password.length&&(this.show_input_password=!1,this.confirmBlancePay())},backspace:function(t){this.pay_password=this.pay_password.slice(this.pay_password.length-1,1)},closeKeyboard:function(t){!1===t&&(this.show_input_password=!1)},confirmBlancePay:function(){var t=this;vk.callFunction({url:"client/order.balancePay",title:"支付中...",data:{_id:t.data.orderInfo._id,check_password:!0,pay_password:t.pay_password},success:function(e){vk.toast(e.msg,"ok"),t.initOrder(e.orderInfo),setTimeout((function(){vk.redirectTo("/pages/activity/activity-pay-success?order_no="+e.orderInfo.order_no+"&_id="+e.orderInfo._id);var n=t.getOpenerEventChannel();n.emit&&n.emit("update_order_msg",e.orderInfo)}),500)}})},toPay:function(){var t=this,e=this.payType;vk.pubfn.debounce((function(){"balance"===e?vk.pubfn.isNull(t.user_pay_password)?(console.log("++++++++++++++++++++++++++++++="),uni.showModal({title:"提示",content:"未设置支付密码，是否立即设置？",confirmText:"立即设置",success:function(e){e.confirm&&vk.navigateTo({url:"/pages/user/setting/set-pay-password",events:{update_pay_password:function(e){t.user_pay_password=e}}})}})):(t.pay_password="",t.show_input_password=!0):"alipay"!==e&&"wxpay"!==e||t.$refs.vkPay.createPayment({provider:e,orderInfo:t.data.orderInfo,success:function(e){vk.toast(e.msg,"ok"),vk.pubfn.isNotNull(e.orderInfo)&&t.initOrder(e.orderInfo),setTimeout((function(){vk.redirectTo("/pages/activity/activity-pay-success?order_no="+e.orderInfo.order_no+"&_id="+e.orderInfo._id);var n=t.getOpenerEventChannel();n.emit&&n.emit("update_order_msg",e.orderInfo)}),500)}})}),600)},applyRefund:function(){var t=this;vk.navigateTo({url:"./refund/goods-refund?_id=".concat(t.data.orderInfo._id),events:{update:function(e){t.initOrder(e)}},success:function(e){e.eventChannel.emit("data",t.data.orderInfo)}})},cancelRefund:function(){var t=this;vk.confirm("确定取消退款吗？","提示","取消退款","点错了",(function(e){e.confirm&&vk.callFunction({url:"client/order.cancelRefund",title:"请求中...",data:{_id:t.data.orderInfo._id},success:function(e){t.initOrder(e.orderInfo),vk.alert(e.msg,"提示","好的")}})}))},buyGoodsNumFn:function(t){var e=0;return t.map((function(t,n){e+=t.buy_num})),e},steps1Fn:function(t){return{"-1":1,0:0,1:1,2:1,3:2,4:2,5:3,6:4}[t.toString()]},steps2Fn:function(t){return{"-4":3,"-3":3,"-2":1}[t.toString()]},status1Fn:function(t){var e=vk.getVuex("$app.config.maill.order.status");return e[t.toString()]||""},status2Fn:function(t){var e=vk.getVuex("$app.config.maill.order.status2"),n=e[t.toString()];return 1===this.data.orderInfo.order_type&&4===this.data.orderInfo.status?n="等待核销":2===this.data.orderInfo.delivery_mode&&"等待商家发货"===n&&(n="请到店自提"),n},countDownEnd:function(){var t=vk.pubfn.getData(this.data,"orderInfo.status");0===t&&this.cancelOrder()},getCalcTime:function(t){var e=parseInt((Date.now()-t)/1e3);e<0&&(e=0);var n=parseInt(e/60),a=parseInt(e-60*n),o=parseInt(n/60);n=parseInt(n-60*o);var i=parseInt(o/24);o=parseInt(o-24*i);var r="";return i&&(r+=i+"天"),o&&(r+=o+"时"),n&&(r+=n+"分"),a&&(r+=a+"秒"),r},orderFistVerify:function(){var t=this,e=t.orderVerify.num,n=t.data.orderInfo._id;vk.callFunction({url:"client/order.orderVerify",loading:!0,data:{_id:n,num:e},success:function(e){vk.alert(e.msg),t.data.orderInfo=e.orderInfo,5===e.orderInfo.status&&(t.orderVerify.show=!1)}})},pageToComment:function(){var t=this,e=t.data.orderInfo._id;vk.navigateTo({url:"/pages/user/order/comment?_id=".concat(e),events:{update:function(e){vk.pubfn.objectAssign(t.data.orderInfo,e),t.initOrder(t.data.orderInfo)}}})},navigationShop:function(){var t=this.data.orderInfo.express_info;uni.openLocation({latitude:t.position.latitude,longitude:t.position.longitude,success:function(){}})}},watch:{},computed:{countDownTimeCom:function(){var t=0,e=Date.now(),n=vk.pubfn.getData(this.data,"orderInfo.auto_cancel_time");return n&&(t=n-e),t<0&&(t=0),t},payTypeCom:function(){var t=vk.pubfn.getData(this.data,"orderInfo.pay_type"),e=vk.getVuex("$app.config.maill.order.payType");return e[t]},showApplyRefundCom:function(){var t=this.data.orderInfo.status,e=vk.getVuex("$user.mchInfo.order_refund.status"),n=[1];return 1===e?n=[1,3,4]:2===e&&(n=[1,3,4,5]),n.indexOf(t)>-1},maxVerifyNum:function(){var t=uni.vk.pubfn.getData(this.data,"orderInfo.goods_sku_list[0]",{}),e=t.buy_num,n=void 0===e?0:e,a=t.refund_num,o=void 0===a?0:a,i=t.verify_num,r=void 0===i?0:i;return n-o-r},stepsListCom:function(){return 2===this.data.orderInfo.delivery_mode?this.steps1.list3:1===this.data.orderInfo.order_type?this.steps1.list2:this.steps1.list}}};e.default=r},b851:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";.bold[data-v-c3e93e42]{font-weight:700}.main-color[data-v-c3e93e42]{color:var(--main)}.card[data-v-c3e93e42]{background-color:#fff;margin:%?20?%;padding:%?30?%;border-radius:%?20?%;overflow:hidden}.card .card-title[data-v-c3e93e42]{font-weight:700}.qrcode-view .qrcode-title[data-v-c3e93e42]{text-align:center;font-size:%?50?%;font-weight:700}.qrcode-view .qrcode[data-v-c3e93e42]{display:flex;justify-content:center;align-items:center;margin-top:%?20?%;position:relative;overflow:hidden}.qrcode-view .qrcode .verified[data-v-c3e93e42]{position:absolute;background-color:#fff;padding:%?20?% %?190?%;color:#000;font-size:%?40?%;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.qrcode-view .qrcode-btn[data-v-c3e93e42]{display:flex;justify-content:center;margin-top:%?20?%}.qrcode-view .qrcode-tips[data-v-c3e93e42]{margin-top:%?20?%}.address-info[data-v-c3e93e42]{font-size:%?26?%}.address-info .address-user[data-v-c3e93e42]{display:flex;align-items:center}.address-info .address-user .address-nickname[data-v-c3e93e42]{flex:1}.address-info .address-user .address-nickname .nickname[data-v-c3e93e42]{margin-left:%?20?%}.address-info .address-user .address-mobile[data-v-c3e93e42]{font-weight:700;letter-spacing:1px}.address-info .address-text[data-v-c3e93e42]{color:#696b6f;margin-top:%?20?%}.address-info .address-navigation[data-v-c3e93e42]{text-align:right;color:var(--main);margin-top:%?20?%}.cell-box[data-v-c3e93e42]{display:flex;padding:%?20?% 0}.cell-box .cell-left[data-v-c3e93e42]{text-align:left;color:#606266}.cell-box .cell-right[data-v-c3e93e42]{flex:1;text-align:right}.navigation[data-v-c3e93e42]{position:fixed;bottom:0;border-top:solid %?2?% #f2f2f2;background-color:#fff;width:100%;z-index:99}.navigation .navigation-main[data-v-c3e93e42]{display:flex;position:relative;padding:%?20?% %?10?%;align-items:center}.navigation .navigation-main .navigation-main-left[data-v-c3e93e42]{display:flex;justify-content:flex-start}.navigation .navigation-main .navigation-main-right[data-v-c3e93e42]{display:flex;flex:1;justify-content:flex-end}.navigation .navigation-main .navigation-btn[data-v-c3e93e42]{color:#666;background-color:#fff;border:%?2?% solid #999;padding:%?10?% %?30?%;border-radius:%?40?%;font-size:%?30?%;font-weight:500;margin:0 %?10?%}.navigation .navigation-main .navigation-btn.main[data-v-c3e93e42]{color:var(--main);background-color:#fff;border:%?2?% solid var(--main)}.navigation .navigation-main .navigation-btn.cancel[data-v-c3e93e42]{color:#999;background-color:#fff;border:%?2?% solid #999}.navigation .navigation-main .navigation-btn[data-v-c3e93e42]:active{background-color:rgba(0,0,0,.2)}.navigation .navigation-inset-bottom[data-v-c3e93e42]{height:0;height:constant(safe-area-inset-bottom);height:env(safe-area-inset-bottom);display:block;width:100%}\n/* 底部安全区域 */.safe-area-inset-bottom[data-v-c3e93e42]{height:calc(%?120?%);height:calc(%?120?% + constant(safe-area-inset-bottom));height:calc(%?120?% + env(safe-area-inset-bottom));display:block}.u-order-title[data-v-c3e93e42]{color:#333;font-weight:700;font-size:%?28?%}.u-order-desc[data-v-c3e93e42]{color:#969696;font-size:%?24?%;margin-bottom:%?6?%}.u-order-time[data-v-c3e93e42]{color:#c8c8c8;font-size:%?24?%}.contact[data-v-c3e93e42]{border:0;line-height:normal;font-size:%?24?%;padding:0;margin:0}',""]),t.exports=e},b9d5:function(t,e,n){"use strict";n.r(e);var a=n("2038"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},bb36:function(t,e,n){var a=n("8b3f");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("589f4367",a,!0,{sourceMap:!1,shadowMode:!1})},be34:function(t,e,n){"use strict";n.r(e);var a=n("4885"),o=n("b9d5");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("eae4");var r=n("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"3e593c34",null,!1,a["a"],void 0);e["default"]=s.exports},c524:function(t,e,n){"use strict";n.r(e);var a=n("9608"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},c7e7:function(t,e,n){"use strict";n("7a82");var a=n("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("f3f3"));n("a9e3"),n("d3b7"),n("c975");var i,r=a(n("d0d7")),s={name:"vk-uni-pay",emits:["update:status","update:codeUrl","update:qrcodeImage","update","success","fail","cancel","init"],props:{queryPaymentAction:{Type:[Object,String],default:function(){return{name:"vk-pay",action:"pay/queryPayment",actionKey:"action",dataKey:"data"}}},codeUrl:{Type:String},qrcodeImage:{Type:String},status:{Type:Number,default:0},pageShow:{Type:Boolean,default:!0},polling:{Type:Boolean,default:!1},pollingTime:{Type:[Number,String],default:1500},returnUrl:{Type:String},awaitNotify:{Type:Boolean,default:!1},payOrderInfo:{Type:Boolean,default:!0},debug:{Type:Boolean,default:!1},autoGetOpenid:{Type:Boolean,default:!0}},data:function(){return{platform:"other",form1:{openid:"",out_trade_no:"",isPC:!1},queryLoading:!1}},mounted:function(){this.init()},destroyed:function(){i&&clearInterval(i)},methods:{init:function(){this.platform="h5",this.form1.isPC="pc"==r.default.checkPlatform(),this.autoGetOpenid&&this.getOpenid(),this.$emit("init")},getOpenid:function(){var t=this;return new Promise((function(e,n){t.form1.openid?e():r.default.getOpenid().then((function(n){t.form1.openid=n.openid,e(n)})).catch((function(t){n(t)}))}))},createPayment:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=e.form1,a=t.needAlert,i=void 0!==a&&a;n=Object.assign(n,t.data),"appleiap"!==n.provider?(e.$emit("update:status",0),uni.showLoading({title:"请求中...",mask:!0}),e.getOpenid().then((function(){r.default.callFunction({action:t.action,data:n,needAlert:i,success:function(a){var o=a.pay_type,i=void 0===o?"":o;if(a.needQRcode||"h5"==e.platform||i.indexOf("_h5")>-1||n.alipayAppPayToH5Pay&&"app"==e.platform&&"alipay"==n.provider)e._h5Pay(a,t);else if("app"==e.platform)e._appPay(a,t);else if("mp-weixin"==e.platform)e._mpWxPay(a,t);else{if("mp-alipay"!=e.platform)return r.default.alert("暂不支持该支付方式"),!1;e._mpAliPay(a,t)}e.$emit("update:status",1)},fail:function(n){var a=(0,o.default)((0,o.default)({},n),{},{failType:"create",failTypeMsg:"创建支付失败"});e._paymentFail(a,t.fail)},complete:function(){uni.hideLoading()}})})).catch((function(){uni.hideLoading()}))):uni.showToast({mask:!0,title:"请在app环境内发起支付",icon:"none"})},queryPayment:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;r.default.callFunction({action:e.queryPaymentAction,data:t.data,title:t.title,needAlert:t.needAlert,success:function(e){t.success&&t.success(e)},fail:function(e){t.fail&&t.fail(e)},complete:function(e){t.complete&&t.complete(e)}})},_h5Pay:function(t,e){var n=this,a=n.form1,o=n.returnUrl,i=t.orderInfo.codeUrl,s=t.qrcodeImage,u=t.orderInfo.mwebUrl||t.orderInfo.mweb_url;if(i||s)n.polling&&n._checkPay(t.out_trade_no,e.success),t.needQRcode||n.form1.isPC||"wxpay"==a.provider&&i?(n.$emit("update:codeUrl",i),n.$emit("update:qrcodeImage",s)):setTimeout((function(){if("app"==n.platform)plus.runtime.openURL(i);else{var t=i||u;"h5-weixin"===r.default.getH5Env()||"h5-alipay"===r.default.getH5Env()?window.location.href=t:window.location.href="alipays://platformapi/startapp?saId=10000007&qrcode=".concat(t,"?_s=web-other")}}),300);else if(u){o||(o=window.location.href);var c=r.default.urlToObject(o);c.confirmShow=!0,c.out_trade_no=a.out_trade_no;var d=o.split("?")[0]+r.default.objectToUrl(c);u+="&redirect_url="+encodeURIComponent(d),setTimeout((function(){"app"==n.platform?plus.runtime.openURL(u):window.location.href=u}),300)}else WeixinJSBridge.invoke("getBrandWCPayRequest",t.orderInfo,(function(t){"get_brand_wcpay_request:ok"==t.err_msg?n._checkPay(a.out_trade_no,e.success,"请稍等...",!0):"get_brand_wcpay_request:cancel"==t.err_msg?"function"===typeof e.cancel&&e.cancel(t):"get_brand_wcpay_request:fail"==t.err_msg&&"function"===typeof e.fail&&e.fail(t),"function"===typeof e.complete&&e.complete(t)}))},_appPay:function(t,e){var n=this,a=n.form1,i=t.out_trade_no;uni.requestPayment((0,o.default)((0,o.default)({provider:a.provider,orderInfo:t.orderInfo},t.orderInfo),{},{success:function(){n._checkPay(i,e.success,"请稍等...",!0)},fail:function(t){console.error(t),r.default.toast("发起支付失败")}}))},_mpWxPay:function(t,e){var n=this,a=t.out_trade_no;uni.requestPayment((0,o.default)((0,o.default)({},t.orderInfo),{},{success:function(){n._checkPay(a,e.success,"请稍等...",!0)},fail:function(t){if(-1==t.errMsg.indexOf("fail cancel")){console.error(t);var a=(0,o.default)((0,o.default)({},t),{},{failType:"request",failTypeMsg:"请求支付失败"});n._paymentFail(a,e.fail)}else n._paymentCancel(t,e.cancel)}}))},_mpAliPay:function(t,e){var n=this,a=t.out_trade_no;uni.requestPayment({orderInfo:t.orderInfo,success:function(t){var o=Number(t.resultCode);[9e3,8e3,6004].indexOf(o)>-1&&n._checkPay(a,e.success,"请稍等...",!0)},fail:function(t){if(-1==t.errMsg.indexOf("fail cancel")){console.error(t);var a=(0,o.default)((0,o.default)({},t),{},{failType:"request",failTypeMsg:"请求支付失败"});n._paymentFail(a,e.fail)}else n._paymentCancel(t,e.cancel)}})},_checkPay:function(t,e,n,a){var o=this;!a||o.awaitNotify||o.payOrderInfo?setTimeout((function(){o._queryPayment(t,e,(function(a){n&&uni.showLoading({title:n,mask:!0});var r=0;i&&clearInterval(i),i=setInterval((function(){o.queryLoading||o.pageShow&&(r++,r>120||1!=o.status?(n&&uni.hideLoading(),clearInterval(i)):o._queryPayment(t,e))}),Number(o.pollingTime))}))}),200):o._paymentSuccess({orderPaid:!0,out_trade_no:t},e)},_queryPayment:function(t,e,n){var a=this;a.queryLoading=!0,r.default.callFunction({action:a.queryPaymentAction,data:{out_trade_no:t,await_notify:!1,pay_order_info:a.payOrderInfo},needAlert:!1,errLog:!1,success:function(n){uni.hideLoading(),i&&clearInterval(i),a.awaitNotify&&!n.user_order_success?a.queryPayment({title:"请求中...",data:{out_trade_no:t,await_notify:!0,pay_order_info:a.payOrderInfo},needAlert:!1,success:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a._paymentSuccess(t,e)},fail:function(){a._paymentSuccess(n,e)}}):a._paymentSuccess(n,e)},fail:function(t){n&&n()},complete:function(){a.queryLoading=!1}})},_paymentSuccess:function(t,e){this.$emit("update:status",2),this.$emit("success",t),"function"===typeof e&&e(t)},_paymentFail:function(t,e){this.$emit("update:status",0),this.$emit("fail",t),"function"===typeof e&&e(t)},_paymentCancel:function(t,e){this.$emit("update:status",0),this.$emit("cancel",t),"function"===typeof e&&e(t)}},watch:{},computed:{}};e.default=s},c818:function(t,e,n){"use strict";function a(t,e,n){var o;o=this.$children,o.map((function(o){t===o.$options.name?o.$emit.apply(o,[e].concat(n)):a.apply(o,[t,e].concat(n))}))}n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("d81d"),n("99af");var o={methods:{dispatch:function(t,e,n){var a=this.$parent||this.$root,o=a.$options.name;while(a&&(!o||o!==t))a=a.$parent,a&&(o=a.$options.name);a&&a.$emit.apply(a,[e].concat(n))},broadcast:function(t,e,n){a.call(this,t,e,n)}}};e.default=o},c998:function(t,e,n){"use strict";n.r(e);var a=n("7dfd"),o=n("617c");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("92bd");var r=n("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"c3e93e42",null,!1,a["a"],void 0);e["default"]=s.exports},cb29:function(t,e,n){"use strict";var a=n("23e7"),o=n("81d5"),i=n("44d2");a({target:"Array",proto:!0},{fill:o}),i("fill")},cfc00:function(t,e,n){var a=n("2332");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("0c22e665",a,!0,{sourceMap:!1,shadowMode:!1})},d0d7:function(t,e,n){"use strict";(function(t){n("7a82");var a=n("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("e9c4"),n("d3b7"),n("99af"),n("d401"),n("25f0"),n("ac1f"),n("00b4"),n("5319"),n("4d63"),n("c607"),n("2c3e"),n("c975"),n("466d");var o=a(n("54f8")),i=a(n("0122")),r={},s=0,u={debug:!1,logger:{colorArr:["#0095f8","#67C23A"]}};r.callFunction=function(){var e,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=u.debug,c=a.action,d=a.data,l=a.title,f=a.needAlert,p=void 0===f||f,m=a.errLog,v=void 0===m||m,h={};if("object"===(0,i.default)(c))if(e=c.name,n=c.action,n){var g=c.actionKey,y=void 0===g?"action":g,_=c.dataKey,b=void 0===_?"data":_;h[y]=n,h[b]=d}else e=c,h=d;else e=c,h=d;var w={};l&&uni.showLoading({title:l}),o&&(w.startTime=Date.now(),w.params="object"==(0,i.default)(d)?JSON.parse(JSON.stringify(d)):d);var x=new Promise((function(c,d){t.callFunction({name:e,data:h,success:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.result;0===e.code?(l&&uni.hideLoading(),o&&(w.result="object"==(0,i.default)(e)?JSON.parse(JSON.stringify(e)):e),"function"==typeof a.success&&a.success(e),"function"==typeof c&&c(e)):(l&&uni.hideLoading(),v?w.error=e:o&&(w.result="object"==(0,i.default)(e)?JSON.parse(JSON.stringify(e)):e),p&&e.msg&&r.alert(e.msg),"function"==typeof a.fail&&a.fail(e),"function"==typeof d&&d(e))},fail:function(t){l&&uni.hideLoading(),w.error=t,t.msg||(t.msg=t.message),p&&t.msg&&r.alert(t.msg),"function"==typeof a.fail&&a.fail(t),"function"==typeof d&&d(t)},complete:function(t){if(o){w.endTime=(new Date).getTime(),w.runTime=w.endTime-w.startTime;var i=u.logger.colorArr,c=i[s%i.length];s++;var d=n?"【".concat(n,"】"):"",l="【云函数请求】【".concat(e,"】").concat(d),f="color:".concat(c,";font-size: 12px;font-weight: bold;");if(console.log("%c--------【开始】"+l+"--------",f),console.log("【请求参数】: ",w.params),console.log("【返回数据】: ",w.result),console.log("【总体耗时】: ",w.runTime,"毫秒【含页面渲染】"),console.log("【请求时间】: ",r.timeFormat(w.startTime,"yyyy-MM-dd hh:mm:ss")),w.error){var p=console.warn||console.error;w.error.err&&w.error.err.stack?(console.error("【Error】: ",w.error),console.error("【Stack】: ",w.error.err.stack)):p("【Error】: ",w.error)}console.log("%c--------【结束】"+l+"--------",f)}"function"==typeof a.complete&&a.complete(t)}})}));return x.catch((function(){})),x},r.getOpenid=function(){return new Promise((function(t,e){t({})}))},r.getH5Openid=function(t){return new Promise((function(e,n){r.callFunction({action:{name:"vk-pay",action:"pay/code2SessionWeixinH5",actionKey:"action",dataKey:"data"},data:{code:t},success:function(t){e(t)},fail:function(t){n(t)}})}))},r.getWeixinCode=function(){return new Promise((function(t,e){}))},r.getAlipayCode=function(){},r.toast=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";uni.showToast({title:t,icon:e,mask:!0,duration:1500})},r.alert=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"提示";uni.showModal({title:e,content:t,showCancel:!1})},r.timeFormat=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;try{if(!t)return"";var a;"number"===typeof t?(10==t.toString().length&&(t*=1e3),a=new Date(t)):a=t;var o=a.getTimezoneOffset(),i=60*o*1e3+60*n*60*1e3,r=a.getTime()+i;a=new Date(r);var s={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};for(var u in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+u+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?s[u]:("00"+s[u]).substr((""+s[u]).length)));return e}catch(c){return t}},r.checkPlatform=function(){var t={win:!1,mac:!1,xll:!1},e=navigator.platform;if(t.win=0==e.indexOf("Win"),t.mac=0==e.indexOf("Mac"),t.x11="X11"==e||0==e.indexOf("Linux"),t.win||t.mac||t.xll){var n=navigator.userAgent.toLowerCase();return n.indexOf("micromessenger")>-1?"weixin":"pc"}return e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1?"ios":"android"},r.urlToObject=function(t){var e=t.split("?")[1],n={};if(e){var a,i=e.split("&"),r=(0,o.default)(i);try{for(r.s();!(a=r.n()).done;){var s=a.value;n[s.split("=")[0]]=s.split("=")[1]}}catch(u){r.e(u)}finally{r.f()}}return n},r.objectToUrl=function(t){var e="";for(var n in t)e+="&".concat(n,"=").concat(t[n]);return e&&(e="?"+e.substring(1)),e},r.getH5Env=function(){var t=window.navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)&&"miniprogram"==t.match(/miniprogram/i)?"mp-weixin":"micromessenger"==t.match(/MicroMessenger/i)?"h5-weixin":"alipay"==t.match(/alipay/i)&&"miniprogram"==t.match(/miniprogram/i)?"mp-alipay":"alipay"==t.match(/alipay/i)?"h5-alipay":"h5"};var c=r;e.default=c}).call(this,n("a9ff")["default"])},d31e:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={uBackTop:n("f92a").default,uIcon:n("d1bb").default,uButton:n("f363").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.complete?n("v-uni-view",{staticClass:"vk-data-float-ball"},[n("u-back-top",{attrs:{"scroll-top":t.scrollTop,"icon-style":{fontSize:"32rpx",color:"#ffffff"},"custom-style":{backgroundColor:"rgba(0, 0, 0, 0.6)"},bottom:200+100*t.rightBtnsCom.length}}),t.data.showBack?n("v-uni-view",{staticClass:"ball-btn left-btn",style:{bottom:200+100*t.leftBtns.length+"rpx",zIndex:t.zIndex},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pageBack.apply(void 0,arguments)}}},[n("u-icon",{attrs:{name:"arrow-left",color:"#FFFFFF",size:"38"}})],1):t._e(),t._l(t.rightBtnsCom,(function(e,a){return n("v-uni-view",{key:a,staticClass:"ball-btn right-btn",style:{bottom:200+100*a+"rpx",zIndex:t.zIndex},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.customEvent(e)}}},["contact"===e?n("u-button",{attrs:{"hover-class":"none",shape:"circle",size:"mini","open-type":"contact",plain:!0,"hair-line":!1,"custom-style":{border:0,width:"80rpx",height:"80rpx",backgroundColor:"rgba(0, 0, 0, 0)"}}},[n("u-icon",{attrs:{name:"server-man",color:"#FFFFFF",size:"38"}})],1):"login"===e?n("v-uni-view",[t._v("登录")]):t._e()],1)}))],2):t._e()},i=[]},d6ec:function(t,e,n){"use strict";n.r(e);var a=n("84cb"),o=n("c524");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("8c57");var r=n("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"003abc61",null,!1,a["a"],void 0);e["default"]=s.exports},e7d3:function(t,e,n){"use strict";n.r(e);var a=n("1f48"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},e8a6:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".vk-data-float-ball .ball-btn[data-v-ebe37cf2]{width:%?80?%;height:%?80?%;position:fixed;border-radius:50%;background-color:rgba(0,0,0,.6);display:flex;justify-content:center;align-items:center;color:#fff;z-index:900}.vk-data-float-ball .left-btn[data-v-ebe37cf2]{left:%?40?%}.vk-data-float-ball .right-btn[data-v-ebe37cf2]{right:%?40?%}",""]),t.exports=e},eae4:function(t,e,n){"use strict";var a=n("689f"),o=n.n(a);o.a},f574:function(t,e,n){"use strict";n.r(e);var a=n("883d"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},f620:function(t,e,n){"use strict";n.r(e);var a=n("b38a"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},f7a5:function(t,e,n){"use strict";var a=n("cfc00"),o=n.n(a);o.a},f92a:function(t,e,n){"use strict";n.r(e);var a=n("940c2"),o=n("f620");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("7b31");var r=n("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"63149417",null,!1,a["a"],void 0);e["default"]=s.exports}}]);