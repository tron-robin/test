(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-vip-vip"],{"0aca":function(e,t,i){"use strict";i.r(t);var n=i("1550"),s=i("aa69");for(var a in s)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(a);i("fb0f");var o=i("f0c5"),l=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"22eee88e",null,!1,n["a"],void 0);t["default"]=l.exports},1550:function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}));var n={uIcon:i("d1bb").default,uCircleProgress:i("e84f").default,vkDataFloatBall:i("80c3").default,vkDataLoading:i("be34").default},s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"app app-bg"},[i("v-uni-view",{staticStyle:{height:"30rpx"}}),i("v-uni-view",{staticClass:"vip-card"},[i("v-uni-view",{staticClass:"name"},[e._v(e._s(e.vipInfo.name))]),e.isHaveCom?i("v-uni-view",{staticClass:"nickname"},[e._v("所属人："+e._s(e.vk.getVuex("$user.userInfo.nickname")))]):e._e(),e.isHaveCom?i("v-uni-view",{staticClass:"add-time"},[e._v("成为VIP之日："),i("v-uni-text",{staticClass:"time-text"},[e._v(e._s(e.$fn.timeFormat(e.vk.getVuex("$user.userInfo.vip_get_time"),"yyyy-MM-dd")))])],1):e._e(),e.isHaveCom?i("v-uni-view",{staticClass:"add-time"},[e._v("成为VIP的第"),i("v-uni-text",{staticClass:"time-text"},[e._v(e._s(e.vk.myfn.user.getVipDay()))]),e._v("天")],1):e._e(),i("v-uni-view",{staticClass:"vip-bg"},[e._v("VIP")])],1),e.complete&&e.nextLevelInfo&&e.nextLevelInfo.name?i("v-uni-view",{staticClass:"vip-explain"},[i("v-uni-view",{staticClass:"cell-box"},[i("v-uni-view",{staticClass:"title"},[e._v(e._s(e.upgradeTextCom))]),i("v-uni-view",{staticClass:"text"},[e._v(e._s(e.nextLevelInfo.name)+" 条件")])],1),i("v-uni-view",{staticClass:"cell-box"},[i("v-uni-view",{staticClass:"title"}),i("v-uni-view",{staticClass:"text"},[e._v("任意满足一条即可"),i("v-uni-text",[e._v(e._s(e.isUpgrade?"（已达标）":"（未达标）"))])],1)],1),e.nextLevelInfo&&e.nextLevelInfo.name?i("v-uni-view",{staticClass:"list"},[e.nextLevelInfo.total_recharge_amount>0?i("v-uni-view",{staticClass:"list-item"},[i("u-icon",{attrs:{name:"vk-mall-icon-jine",size:"80"}}),i("v-uni-view",{staticClass:"list-item-text"},[i("v-uni-view",{staticClass:"item-title"},[e._v("累计充值余额")]),i("v-uni-view",{staticClass:"item-amount"},[e._v(e._s(e.$fn.priceFilter(e.nextLevelInfo.total_recharge_amount))),e.differenceRechargeAmountCom>0?i("v-uni-text",[e._v("（差"+e._s(e.differenceRechargeAmountCom)+"）")]):e._e()],1)],1),i("u-circle-progress",{attrs:{type:"success",percent:e.totalRechargeAmountPercentCom,"bg-color":"#f7f9fd",width:"130","border-width":"10"}},[i("v-uni-view",{staticClass:"u-progress-content"},[i("v-uni-view",{staticClass:"u-progress-dot"}),i("v-uni-text",{staticClass:"u-progress-info"},[e._v(e._s(e.totalRechargeAmountPercentCom)+"%")])],1)],1)],1):e._e(),e.nextLevelInfo.total_order_amount>0?i("v-uni-view",{staticClass:"list-item"},[i("u-icon",{attrs:{name:"vk-mall-icon-gouwuche",size:"80"}}),i("v-uni-view",{staticClass:"list-item-text"},[i("v-uni-view",{staticClass:"item-title"},[e._v("累计消费金额")]),i("v-uni-view",{staticClass:"item-amount"},[e._v(e._s(e.$fn.priceFilter(e.nextLevelInfo.total_order_amount))),e.differenceOrderAmountCom>0?i("v-uni-text",[e._v("（差"+e._s(e.differenceOrderAmountCom)+"）")]):e._e()],1),e.sumNotReceiptAmount>0?i("v-uni-view",{staticClass:"sum-not-receipt-amount"},[e._v("您有 "+e._s(e.$fn.priceFilter(e.sumNotReceiptAmount))+" 未确认收货")]):e._e(),e.sumNotReceiptAmount>0?i("v-uni-view",{staticClass:"sum-not-receipt-amount"},[e._v("确认收货后才计入消费金额")]):e._e()],1),i("u-circle-progress",{attrs:{type:"success",percent:e.totalOrderAmountPercentCom,"bg-color":"#f7f9fd",width:"130","border-width":"10"}},[i("v-uni-view",{staticClass:"u-progress-content"},[i("v-uni-view",{staticClass:"u-progress-dot"}),i("v-uni-text",{staticClass:"u-progress-info"},[e._v(e._s(e.totalOrderAmountPercentCom)+"%")])],1)],1)],1):e._e(),e.nextLevelInfo.goods_ids&&e.nextLevelInfo.goods_ids.length>0?i("v-uni-view",{staticClass:"list-item"},[i("u-icon",{attrs:{name:"vk-mall-icon-gouwuche",size:"80"}}),i("v-uni-view",{staticClass:"list-item-text"},[i("v-uni-view",{staticClass:"item-title"},[e._v("购买指定会员商品")]),i("v-uni-view",{staticClass:"item-amount"})],1),i("u-circle-progress",{attrs:{type:"success",percent:e.isBuyVipGoodsCom,"bg-color":"#f7f9fd",width:"130","border-width":"10"}},[i("v-uni-view",{staticClass:"u-progress-content"},[i("v-uni-view",{staticClass:"u-progress-dot"}),i("v-uni-text",{staticClass:"u-progress-info"},[e._v(e._s(e.isBuyVipGoodsCom)+"%")])],1)],1)],1):e._e()],1):e._e()],1):e._e(),e.complete?[e.isMaxLv?i("v-uni-view",{staticClass:"receive-btn"},[e._v("恭喜您已达到最高级别")]):e.isUpgrade?i("v-uni-view",{staticClass:"receive-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.receiveVip(e.nextLevelInfo.lv)}}},[e._v("立即"+e._s(e.upgradeTextCom)+" "+e._s(e.nextLevelInfo.name))]):i("v-uni-view",{staticClass:"receive-btn"},[e._v("未达标")])]:e._e(),e.showVipBenefitsCom?i("v-uni-view",{staticClass:"vip-explain"},[i("v-uni-view",{staticClass:"cell-box"},[i("v-uni-view",{staticClass:"text",staticStyle:{width:"100%"}},[e._v(e._s(e.vipInfo.name)+" 会员权益")])],1),i("v-uni-view",{staticClass:"list"},[e.vipInfo.discount<1?i("v-uni-view",{staticClass:"list-item"},[i("u-icon",{attrs:{name:"vk-mall-icon-huiyuan",size:"80"}}),i("v-uni-view",{staticClass:"list-item-text"},[i("v-uni-view",{staticClass:"item-title"},[e._v("会员折扣")]),i("v-uni-view",{staticClass:"item-describe"},[e._v("购物享 "+e._s(e.$fn.discountFilter(e.vipInfo.discount)))])],1)],1):e._e(),e.vipInfo.is_free_shipping?i("v-uni-view",{staticClass:"list-item"},[i("u-icon",{attrs:{name:"vk-mall-icon-wuliu",size:"80"}}),i("v-uni-view",{staticClass:"list-item-text"},[i("v-uni-view",{staticClass:"item-title"},[e._v("包邮")]),i("v-uni-view",{staticClass:"item-describe"},[e._v("所有商品满 "+e._s(e.$fn.priceFilter(e.vipInfo.free_shipping_min_order_amount))+" 元包邮")])],1)],1):e._e(),e.vipInfo.integral_ratio>1?i("v-uni-view",{staticClass:"list-item"},[i("u-icon",{attrs:{name:"vk-mall-icon-jifen",size:"80"}}),i("v-uni-view",{staticClass:"list-item-text"},[i("v-uni-view",{staticClass:"item-title"},[e._v("积分")]),i("v-uni-view",{staticClass:"item-describe"},[e._v("积分获取倍率 * "+e._s(e.vipInfo.integral_ratio))])],1)],1):e._e(),e._l(e.vipInfo.custom_service,(function(t,n){return i("v-uni-view",{key:n,staticClass:"list-item"},[i("u-icon",{attrs:{name:"vk-mall-icon-quanyi",size:"80"}}),i("v-uni-view",{staticClass:"list-item-text"},[i("v-uni-view",{staticClass:"item-title"},[e._v(e._s(t.name))]),i("v-uni-view",{staticClass:"item-describe"},[e._v(e._s(t.comment))])],1)],1)}))],2)],1):e._e(),i("v-uni-view",{staticClass:"safe-area-inset-bottom",staticStyle:{height:"20rpx",display:"block"}}),i("vk-data-float-ball",{attrs:{"scroll-top":e.scrollTop}}),i("vk-data-loading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}})],2)},a=[]},5080:function(e,t,i){"use strict";i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=uni.vk,s={data:function(){return{vipInfo:{name:"获取中...",get_time:0},nextLevelInfo:{},sumReceiptAmount:0,sumNotReceiptAmount:0,isBuyVipGoods:!1,data:{},form1:{},scrollTop:0,loading:!1,complete:!1}},onPageScroll:function(e){this.scrollTop=e.scrollTop},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=uni.vk,this.options=e,this.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){this.getMyInfo()},getMyInfo:function(){var e=this;n.callFunction({url:"client/user.getMyVipInfo",success:function(t){var i=t.userInfo,s=void 0===i?{}:i,a=n.getVuex("$user.mchInfo.vip_level_rule"),o=s.vip_lv,l=n.pubfn.getListItem(a,"lv",0==o?1:o);e.vipInfo=l,e.sumReceiptAmount=t.sumReceiptAmount,e.sumNotReceiptAmount=t.sumNotReceiptAmount,e.nextLevelInfo=n.pubfn.getListItem(a,"lv",o+1),t.mchInfo&&n.setVuex("$user.mchInfo",t.mchInfo),e.isBuyVipGoods=t.isBuyVipGoods,e.complete=!0}})},receiveVip:function(e){var t=this;n.callFunction({url:"client/user.receiveVip",title:"请求中...",data:{lv:e},success:function(e){e.isUpgrade?(n.toast("升级成功","ok"),t.getMyInfo()):n.alert("未满足升级条件")}})}},watch:{},computed:{isHaveCom:function(){return n.getVuex("$user.userInfo.vip_lv")>0},isUpgrade:function(){var e=this.totalRechargeAmountPercentCom,t=this.totalOrderAmountPercentCom,i=this.isBuyVipGoodsCom;return 100===e||100===t||100===i},isMaxLv:function(){var e=this.vk,t=this.nextLevelInfo;return!e.pubfn.isNotNull(t)},totalRechargeAmountPercentCom:function(){var e=0,t=this.vk,i=this.nextLevelInfo;if(i&&i.name){var n=t.getVuex("$user.userInfo.account_balance.total")||0;e=t.pubfn.toDecimal(n/i.total_recharge_amount*100,2),e<0&&(e=0),e>100&&(e=100)}return e},differenceRechargeAmountCom:function(){var e=0,t=this.vk,i=this.nextLevelInfo;if(i&&i.name){var n=t.getVuex("$user.userInfo.account_balance.total")||0;e=t.pubfn.priceFilter(i.total_recharge_amount-n),e<0&&(e=0)}return e},totalOrderAmountPercentCom:function(){var e=0,t=this.vk,i=this.nextLevelInfo;if(i&&i.name){var n=this.sumReceiptAmount||0;e=t.pubfn.toDecimal(n/i.total_order_amount*100,2),e<0&&(e=0),e>100&&(e=100)}return e},isBuyVipGoodsCom:function(){return this.isBuyVipGoods?100:0},differenceOrderAmountCom:function(){var e=0,t=this.vk,i=this.nextLevelInfo;if(i&&i.name){var n=this.sumReceiptAmount||0;e=t.pubfn.priceFilter(i.total_order_amount-n),e<0&&(e=0)}return e},upgradeTextCom:function(){return n.getVuex("$user.userInfo.vip_lv")>0?"升级":"领取"},showVipBenefitsCom:function(){var e=this.complete,t=this.vipInfo,i=void 0===t?{}:t,s=!!(i.discount<1||i.is_free_shipping||i.integral_ratio>1||n.pubfn.isNotNull(i.custom_service));return!!(e&&i.lv>0&&s)}}};t.default=s},"7d13":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".app[data-v-22eee88e]{--bgcolor:#333}.vip-card[data-v-22eee88e]{background-color:#b9c3d5;width:80%;margin:%?0?% auto;height:%?260?%;border-radius:%?20?%;position:relative;padding:%?30?%;overflow:hidden;box-shadow:%?2?% %?6?% %?4?% %?6?% #b9c3d5;color:#3a4b6c}.vip-card .name[data-v-22eee88e]{margin-top:%?40?%;font-size:%?40?%;font-weight:700}.vip-card .nickname[data-v-22eee88e]{margin-top:%?20?%;font-size:%?24?%}.vip-card .add-time[data-v-22eee88e]{font-size:%?24?%;text-align:right}.vip-card .add-time .time-text[data-v-22eee88e]{min-width:%?140?%;display:inline-block}.vip-card .vip-bg[data-v-22eee88e]{position:absolute;right:%?-25?%;top:%?-45?%;font-size:%?150?%;font-weight:700;color:#fff;opacity:.3}.vip-explain[data-v-22eee88e]{width:90%;margin:%?60?% auto 0 auto;background-color:#fff;border-radius:%?20?%;padding:%?30?%}.vip-explain .cell-box[data-v-22eee88e]{display:flex;padding:%?20?% 0}.vip-explain .cell-box .title[data-v-22eee88e]{width:%?160?%;font-weight:700;font-size:%?30?%}.vip-explain .cell-box .text[data-v-22eee88e]{flex:1;font-weight:700;color:var(--main)}.vip-explain .list[data-v-22eee88e]{background-color:#f7f9fd;padding:%?20?%;border-radius:%?20?%;overflow:hidden}.vip-explain .list .list-item[data-v-22eee88e]{display:flex;margin-top:%?50?%;align-items:center}.vip-explain .list .list-item .list-item-text[data-v-22eee88e]{flex:1;margin-left:%?30?%}.vip-explain .list .list-item .list-item-text .item-title[data-v-22eee88e]{font-weight:700;font-size:%?34?%}.vip-explain .list .list-item .list-item-text .item-describe[data-v-22eee88e]{margin-top:%?6?%;font-size:%?26?%;color:#9d9d9d}.vip-explain .list .list-item .list-item-text .item-amount[data-v-22eee88e]{margin-top:%?6?%;font-size:%?26?%;color:#9d9d9d}.vip-explain .list .list-item .list-item-text .sum-not-receipt-amount[data-v-22eee88e]{margin-top:%?6?%;font-size:%?24?%;color:#9d9d9d}.vip-explain .list .list-item[data-v-22eee88e]:first-child{margin-top:%?0?%}.receive-btn[data-v-22eee88e]{background:linear-gradient(90deg,#f8e4c3,#e5c38c);border-radius:%?40?%;width:90%;margin:%?40?% auto;color:#624520;padding:%?24?%;font-weight:700;text-align:center;letter-spacing:%?2?%}.receive-btn[data-v-22eee88e]:active{opacity:.7}",""]),e.exports=t},aa69:function(e,t,i){"use strict";i.r(t);var n=i("5080"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=s.a},dcd4:function(e,t,i){var n=i("7d13");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=i("4f06").default;s("03b7eac0",n,!0,{sourceMap:!1,shadowMode:!1})},fb0f:function(e,t,i){"use strict";var n=i("dcd4"),s=i.n(n);s.a}}]);